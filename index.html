<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="stylesheet" href="./dist/main.css" />
  <link rel="stylesheet" href="index.css" />
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <title>Forex Facade</title>

</head>

<body>
  <div class="chartWrapper">
    <h1 class="forex-title">FOREX FACADE</h1>

    <div class="chartMenu">
    <div class="chartMenu1">
      <button id="instructionsButton" class="active">Instructions</button>
      <label for="currency">Currency:</label>
      <select id="currency">
        <option value="currency0">EUR/USD</option>
        <option value="currency1">USD/JPY</option>
        <option value="currency3">GBP/USD</option>
      </select>
      <label for="macroData">Macro Data:</label>
      <select id="macroData">
        <option value="macroData0">Consumer Price Index (percent)</option>
        <option value="macroData1">Employment (millions)</option>
        <option value="macroData2">Federal Funds Rate (percent)</option>
      </select>

      <div class="dateRangeWrapper">
        <input type="text" id="startDateInput" placeholder="01/01/1999">
        <input type="text" id="endDateInput" placeholder="07/01/2023">
        <button id="dateRangeButton" class="active">Select Date Range</button>
      </div>
    </div>

        <div class="footer">
          <a href="https://github.com/lewiskk016" target="blank">
            <img src="github-mark-white.png"/>
          </a>
          <a href="https://linkedin.com/in/kevin-lewis-5b0baa27b/" target="blank">
            <img src="icons8-linkedin-30.png"/>
          </a>
          <label id="currencyLabel" for="inputAmount">Exchange Rate Converter:</label>
          <input type="number" id="inputAmount" min="0" step="0.01" placeholder="Enter an amount ">
          <button id="convertButton" class="active">Convert</button>
          <div id="result" class="red-text"></div>
        </div>
    </div>

    <div class="chartAreaWrapper">
      <canvas id="myChart"></canvas>
    </div>

    <div class="instructionsWrapper" id="instructionsWrapper">
      <h3 class="instruction-title">FOREX FACADE</h3>
      <p>As global trade increases, the foreign exchange market has become increasingly important to facilitate cross-border commerce.This graph is meant to show the relationship between exchange rates and macroeconomic factors.</p>
      <p>By selecting different "Currency" pairs and "Macro Data" indicators, you will be able to render different graphs to understand the interaction between the two. Moreover, you can customize time-ranges by specifying the dates in the top right of the graph. You can see precise values of exchange rate and macro data by hovering over the chart rendering. Furthermore, there is an exchange rate calculator that will convert the real-time exchange rate of the displayed currency-pair. </p>
      <div class="instructionsClose">
        <button id="closeButton">Close</button>
      </div>
    </div>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@0.7.7"></script>
  <script type="module" src="../src/script.js"></script>
  <script src="src/rates.js"></script>

  <script>
    document.getElementById('convertButton').addEventListener('click', convertCurrency);
  </script>



  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script>


  document.getElementById('instructionsButton').addEventListener('click', function() {
    const instructionsWrapper = document.getElementById('instructionsWrapper');
    instructionsWrapper.style.display = instructionsWrapper.style.display === 'block' ? 'none' : 'block';
    this.classList.toggle('active');
  });

  document.getElementById('closeButton').addEventListener('click', function() {
    document.getElementById('instructionsWrapper').style.display = 'none';
  });

  window.addEventListener('resize', function() {
    const instructionsWrapper = document.getElementById('instructionsWrapper');
    if (instructionsWrapper.style.display === 'block') {
      adjustInstructionsWrapperPosition(instructionsWrapper);
    }
  });



  document.getElementById('dateRangeButton').addEventListener('click', function() {
    const startDateInput = document.getElementById('startDateInput');
    const endDateInput = document.getElementById('endDateInput');
    const startDate = moment(startDateInput.value, 'MM/DD/YYYY');
    const endDate = moment(endDateInput.value, 'MM/DD/YYYY');

    // Check if start date is empty
    if (!startDate.isValid()) {
      // Set default start date to the first available date
      startDateInput.value = '01/01/1999';
    }

    // Check if end date is empty
    if (!endDate.isValid()) {
      // Set default end date to the last available date
      endDateInput.value = '07/01/2023';
    }

    // Process the selected date range and update the chart accordingly
    processDateRange(startDate, endDate);
  });

  function processDateRange(startDate, endDate) {
    // TODO: Implement chart update logic based on the selected date range
    console.log('Start Date:', startDate);
    console.log('End Date:', endDate);
  }

  document.addEventListener('DOMContentLoaded', function() {
    const currencySelect = document.getElementById('currency');
    const macroDataSelect = document.getElementById('macroData');
    const dateRangeButton = document.getElementById('dateRangeButton');

    currencySelect.addEventListener('change', function() {
      const startDateInput = document.getElementById('startDateInput');
      const endDateInput = document.getElementById('endDateInput');
      const startDate = moment(startDateInput.value, 'MM/DD/YYYY');
      const endDate = moment(endDateInput.value, 'MM/DD/YYYY');

      // Trigger the "Select Date Range" button click event
      dateRangeButton.click();

      // Update the date inputs with the default values
      startDateInput.value = '01/01/1999';
      endDateInput.value = '07/01/2023';
    });

    macroDataSelect.addEventListener('change', function() {
      const startDateInput = document.getElementById('startDateInput');
      const endDateInput = document.getElementById('endDateInput');
      const startDate = moment(startDateInput.value, 'MM/DD/YYYY');
      const endDate = moment(endDateInput.value, 'MM/DD/YYYY');

      // Trigger the "Select Date Range" button click event
      dateRangeButton.click();

      // Update the date inputs with the default values
      startDateInput.value = '01/01/1999';
      endDateInput.value = '07/01/2023';
    });
  });


</script>

</body>
</html>
